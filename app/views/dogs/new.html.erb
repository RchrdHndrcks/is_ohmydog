<%= form_for @dog do |f| %>
  <label> Nombre </label>
  <%= f.text_field :name %>
  <%= render_error_messages_for(@dog, :name) %>

  <label> Raza </label>
  <%= f.text_field :breed %>
  <%= render_error_messages_for(@dog, :breed) %>

  <label> Fecha de Nacimiento </label>
  <%= f.date_field :birthdate %>
  <%= render_error_messages_for(@dog, :birthdate) %>
  
  <label> Foto </label>
  <%= f.file_field :image %>
  <%= render_error_messages_for(@dog, :image) %>

  <%= f.hidden_field :user_id, value: params[:user_id] %>

  <%= f.submit 'Registrar Perro' %>
<% end %>

<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script>
  $(document).ready(function() {
    $('#new_dog').submit(function(event) {
      // Reinicia los mensajes de error antes de cada envío
      $('.error-message').remove();

      // Valida cada campo
      var isValid = true;

      if (!$('#dog_name').val()) {
        $('#dog_name').after('<p class="error-message">Este campo es obligatorio</p>');
        isValid = false;
      }

      if (!$('#dog_breed').val()) {
        $('#dog_breed').after('<p class="error-message">Este campo es obligatorio</p>');
        isValid = false;
      }

      if (!$('#dog_birthdate').val()) {
        $('#dog_birthdate').after('<p class="error-message">Este campo es obligatorio</p>');
        isValid = false;
      }

      if (!$('#dog_image').val()) {
        $('#dog_image').after('<p class="error-message">Este campo es obligatorio</p>');
        isValid = false;
      }

      // Si algún campo no es válido, evita el envío del formulario
      if (!isValid) {
        event.preventDefault();
      }
    });
  });
</script>